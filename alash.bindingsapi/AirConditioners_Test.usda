#usda 1.0

def Scope "HelloWorldAirCon"
{
    def Cube "AirConditioner_001"
    {
        string deviceName = "aircon3245"

        # EVENT Binding
        double temperature = 0.0 (
            customData = {
                dictionary event = {
                    # Connection reference
                    string connectionRef = "mqtt_local"
                    string configFile = "usd_config/connections.toml"
                    
                    # Namespace
                    string endpointTarget = "devices/aircon3245/temperature"
                    
                    # Filtering
                    string filterExpression = "$.data.temperature.Value"
                    
                    # Delivery
                    int reliability = 1  # QoS 1
                    
                    # Data Shape
                    string payloadFormat = "JSON"
                    string schema = ""
                    
                    # Metadata
                    string description = "Air conditioner temperature from OPC UA PubSub via MQTT"
                    bool enabled = true
                }
            }
        )
        
        # REQUEST Binding
        string status = "unknown" (
            customData = {
                dictionary request = {
                    # Connection reference
                    string connectionRef = "api_local"
                    string configFile = "usd_config/connections.toml"
                    
                    # Namespace
                    string endpointTarget = "/devices/aircon3245/status"
                    string method = "GET"
                    
                    # Filtering
                    string filterExpression = "$.status"
                    
                    # Delivery
                    int reliability = 3  # Max retries
                    
                    # Data Shape
                    string payloadFormat = "JSON"
                    string schema = ""
                    
                    # Metadata
                    string description = "Device operational status via REST API"
                    int pollIntervalSeconds = 30
                    bool enabled = true
                }
            }
        )
    }
}